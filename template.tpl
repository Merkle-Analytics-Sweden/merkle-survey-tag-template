___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Merkle Survey",
  "categories": ["SURVEY", "ANALYTICS"],
  "brand": {
    "id": "github.com_Merkle-Analytics-Sweden",
    "displayName": "Merkle-Analytics-Sweden",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Merkle Survey combines attitudinal survey data with behavioural data in GA4, allowing you to extract deep insights from asking just a handful of questions.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "SELECT",
    "name": "environment",
    "displayName": "Environment",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "dev",
        "displayValue": "Development"
      },
      {
        "value": "prod",
        "displayValue": "Production"
      }
    ],
    "simpleValueType": true,
    "alwaysInSummary": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "defaultValue": "dev",
    "help": "Determines whether the production or development script should be provided."
  },
  {
    "type": "TEXT",
    "name": "surveyId",
    "displayName": "Survey ID",
    "simpleValueType": true,
    "help": "ID of the survey, provided by Merkle.",
    "valueValidators": [
      {
        "type": "REGEX",
        "args": [
          "[0-9]{10,}.[0-9]{10,}"
        ]
      },
      {
        "type": "NON_EMPTY"
      }
    ],
    "valueHint": "Eg. 123456789.123456789",
    "notSetText": "Survey ID field cannot be empty.",
    "alwaysInSummary": true
  },
  {
    "type": "TEXT",
    "name": "dataLayer",
    "displayName": "Survey data layer",
    "simpleValueType": true,
    "defaultValue": "_ocs",
    "help": "You need to add the survey data layer name as a key under Template \u003e Permissions \u003e Accesses global variables, if the data layer name isn\u0027t the default value \"_ocs\".",
    "alwaysInSummary": true,
    "valueValidators": [
      {
        "type": "REGEX",
        "args": [
          "^((?!dataLayer).)*$"
        ]
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const injectScript = require('injectScript');
const setWindow = require('setInWindow');
const encodeUriComponent = require('encodeUriComponent');

let env = data.environment; 
let surveyId = data.surveyId;
let dataLayer = data.dataLayer;
let url = 'https://cdn.merklesurvey.com/' + encodeUriComponent(env) + '/surveys/SID.' + encodeUriComponent(surveyId) + '.js?dl=' + encodeUriComponent(dataLayer);

setWindow(dataLayer, [], true);

injectScript(url, data.gtmOnSuccess(), data.gtmOnFailure());


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://cdn.merklesurvey.com/*/surveys/SID.*.js?dl=*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_ocs"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 05/04/2024, 11:21:47
